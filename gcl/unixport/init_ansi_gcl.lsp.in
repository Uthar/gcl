(setq si::*optimize-maximum-pages* nil)
(push :common-lisp *features*)
(push :ansi-cl *features*)
  
(make-package "SLOOP" :use '("LISP"))
(make-package "SERROR" :use '("LISP" "SLOOP"))
(make-package "ANSI-LOOP" :use '("LISP"))
(make-package "DEFPACKAGE" :use '("LISP"))
(make-package "TK" :use '("LISP" "SLOOP"))
(make-package "MPI" :use '("LISP" "SLOOP"))
(make-package "JAPI-PRIMITIVES" :use '("LISP"))
(make-package "TK-PRIMITIVES" :use '("LISP"))
#+win32(make-package :WIN32-PRIMITIVES :use '("LISP"))
@LI-PCL-PACKAGE@

(in-package :pcl)
(defvar *the-pcl-package* (find-package :pcl))
(defun load-truename (&optional (errorp nil))
  (flet () *load-pathname* nil))

@LI-CLCS-PACKAGE@

(rename-package 'user 'common-lisp-user '(cl-user user))

(in-package "SYSTEM")

(defvar *command-args* nil)
 ;; if ANY header or license information is printed by the
 ;; program, then the following License and Enhancement notice
 ;; must be printed (see License).
(progn 

 (setq si:*inhibit-macro-special* t)
 (system:init-system) 
 (gbc t)

(progn
  (in-package 'lisp)
;; FIXME integrate this into the stream objects et.al. and/or
;; just use defclass
;  (defstruct (UNBOUND-SLOT (:constructor %make-UNBOUND-SLOT)))
;  (defstruct ( TWO-WAY-STREAM (:constructor %make-TWO-WAY-STREAM)))
;  (defstruct ( SYNONYM-STREAM (:constructor %make-SYNONYM-STREAM)))
;  (defstruct ( STYLE-WARNING (:constructor %make-STYLE-WARNING)))
;  (defstruct ( STRING-STREAM (:constructor %make-STRING-STREAM)))
;  (defstruct ( STREAM (:constructor %make-STREAM)))
;  (defstruct ( READTABLE (:constructor %make-READTABLE) (:copier %copy-readtable)))
;  (defstruct ( READER-ERROR (:constructor %make-READER-ERROR)))
;  (defstruct ( RANDOM-STATE (:constructor %make-RANDOM-STATE) (:predicate %random-state-p)))
;  (defstruct ( PRINT-NOT-READABLE (:constructor %make-PRINT-NOT-READABLE)))
;  (defstruct (PATHNAME (:constructor %make-PATHNAME)))
;  (defstruct ( PACKAGE (:constructor %make-PACKAGE)))
;  (defstruct ( LOGICAL-PATHNAME (:constructor %make-LOGICAL-PATHNAME)))
;  (defstruct ( HASH-TABLE (:constructor %make-HASH-TABLE) (:predicate %hash-table-p)))
;  (defstruct ( FUNCTION (:constructor %make-FUNCTION)))
;  (defstruct (FLOATING-POINT-INVALID-OPERATION (:constructor %make-FLOATING-POINT-INVALID-OPERATION)))
;  (defstruct ( FLOATING-POINT-INEXACT (:constructor %make-FLOATING-POINT-INEXACT)))
;  (defstruct ( FILE-STREAM (:constructor %make-FILE-STREAM)))
;  (defstruct (ECHO-STREAM (:constructor %make-ECHO-STREAM)))
;  (defstruct ( CONCATENATED-STREAM (:constructor %make-CONCATENATED-STREAM)))
;  (defstruct ( BROADCAST-STREAM (:constructor %make-BROADCAST-STREAM))))
)

 (in-package "USER")

 (or lisp::*link-array*
     (setq lisp::*link-array*
	   (make-array (ash 1 11)  :element-type 'character :fill-pointer 0)))
 (si::use-fast-links t)

 (let* ((x (append (pathname-directory si::*system-directory*) (list :parent)))
	(lsp (append x (list "lsp")))
	(cmpnew (append x (list "cmpnew")))
	(h (append x (list "h")))
	(pcl (append x (list "pcl")))
	(clcs (append x (list "clcs")))
	(gtk (append x (list "gcl-tk"))))
;   (dolist (d (list lsp cmpnew pcl clcs))
;       (load (make-pathname :name "sys-proclaim" :type "lisp" :directory d)))
   (load (make-pathname :name "tk-package" :type "lsp" :directory gtk))
;   (load (make-pathname :name "gcl_cmpmain" :type "lsp" :directory cmpnew))
   (load (make-pathname :name "gcl_lfun_list" :type "lsp" :directory cmpnew))
   (load (make-pathname :name "gcl_cmpopt" :type "lsp" :directory cmpnew))
   (load (make-pathname :name "gcl_auto_new" :type "lsp" :directory lsp))

   (gbc t)

   (setq compiler::*cmpinclude* "\"cmpinclude.h\"") 
 
   (when compiler::*cmpinclude-string*
     (with-open-file (st (make-pathname :directory h :name "cmpinclude" :type "h"))
		     (let
			 ((tem (make-array (file-length st) :element-type 'standard-char
					   :static t)))
		       (if (si::fread tem 0 (length tem) st)
			   (setq compiler::*cmpinclude-string* tem))))))
 
 (defvar si::*lib-directory* (namestring (make-pathname :directory (list :parent))))
 
 (terpri)
 (setq si:*inhibit-macro-special* t)
 (gbc t) (system:reset-gbc-count)
 
 (setq compiler::*default-c-file* nil)
 (setq compiler::*default-h-file* nil)
 (setq compiler::*default-data-file* nil)
 (setq compiler::*default-system-p* nil)
 (setq compiler::*keep-gaz* nil)
 
 ;anything in "SYSTEM" which should go in "COMMON-LISP"
;can be added to shadow-system
 
(let ((s '(LISP::PATHNAMEP LISP::INTERN PCL::METHOD-COMBINATION-ERROR LISP::STEP
           PCL::NO-NEXT-METHOD LISP::COERCE PCL::DEFCLASS LISP::WARN
           LISP::UNBOUND-VARIABLE LISP::DYNAMIC-EXTENT
           LISP::WITH-OUTPUT-TO-STRING LISP::STRING-NOT-LESSP
           PCL::INITIALIZE-INSTANCE PCL::ADD-METHOD
           LISP::MAKE-STRING-INPUT-STREAM LISP::MAKE-STRING-OUTPUT-STREAM
           LISP::BOOLE-ORC1 LISP::BOOLE-ORC2 LISP::STRING-LEFT-TRIM
           LISP::FLOAT-PRECISION LISP::PLUSP CONDITIONS::COMPUTE-RESTARTS
           LISP::BOOLE LISP::CONDITION LISP::NSUBSTITUTE-IF-NOT LISP::PROG1
           LISP::ROW-MAJOR-AREF LISP::SVREF LISP::PPRINT-TABULAR
           LISP::INTERNAL-TIME-UNITS-PER-SECOND LISP::PATHNAME-DEVICE
           LISP::HASH-TABLE-TEST LISP::COSH ANSI-LOOP::LOOP-FINISH
           LISP::SIGNUM LISP::REM LISP::APPEND LISP::FILE-NAMESTRING
           LISP::SPEED LISP::WRITE-CHAR LISP::PPRINT-EXIT-IF-LIST-EXHAUSTED
           LISP::SUBTYPEP LISP::FROUND LISP::DECODE-FLOAT
           CONDITIONS::TYPE-ERROR-DATUM LISP::COMPILATION-SPEED LISP::ABS
           LISP::MULTIPLE-VALUE-BIND LISP::LCM LISP::LOGTEST
           LISP::*PRINT-ESCAPE* LISP::*PRINT-BASE* LISP::*PRINT-CASE*
           LISP::LONG-FLOAT LISP::SIMPLE-STRING-P
           CONDITIONS::INVOKE-RESTART-INTERACTIVELY LISP::CHAR= LISP::LOGNOT
           LISP::RANDOM LISP::SYNONYM-STREAM-SYMBOL LISP::CDDAR LISP::CADR
           PCL::PRINT-OBJECT LISP::SIMPLE-STRING LISP::REPLACE LISP::IMPORT
           LISP::PROVIDE LISP::CLRHASH LISP::USER-HOMEDIR-PATHNAME
           LISP::GENTEMP LISP::VECTOR LISP::FCEILING LISP::BOOLE-C2
           LISP::DECLAIM LISP::DESCRIBE LISP::DELETE-FILE LISP::TYPEP
           LISP::UNEXPORT LISP::REAL SYSTEM::COMPILER-MACRO-FUNCTION
           LISP::SET-MACRO-CHARACTER LISP::GET-MACRO-CHARACTER LISP::SETQ
           LISP::RENAME-FILE LISP::NINTERSECTION LISP::BYTE-SIZE LISP::SYMBOLP
           LISP::ROTATEF LISP::CHAR-NAME LISP::READ-LINE LISP::***
           LISP::TWO-WAY-STREAM LISP::ARRAY-ELEMENT-TYPE LISP::Y-OR-N-P
           CONDITIONS::SIMPLE-CONDITION-FORMAT-CONTROL LISP::FMAKUNBOUND
           LISP::BIGNUM LISP::MAKE-HASH-TABLE LISP::LOCALLY LISP::ADJOIN
           LISP::CONCATENATE LISP::SET-SYNTAX-FROM-CHAR LISP::DENOMINATOR
           LISP::READER-ERROR LISP::BIT-ORC2 LISP::TRANSLATE-PATHNAME
           PCL::SLOT-UNBOUND LISP::SERIOUS-CONDITION LISP::REMPROP
           LISP::STANDARD-CHAR-P LISP::EQ LISP::CDADDR LISP::PI LISP::SUBSETP
           LISP::SYMBOL-PLIST LISP::FORMAT LISP::GO LISP::*PRINT-GENSYM*
           LISP::COPY-TREE LISP::LOGANDC1 LISP::LOAD LISP::LIST-ALL-PACKAGES
           LISP::CLEAR-OUTPUT LISP::CAADDR LISP::DO LISP::BYTE-POSITION
           LISP::DEPOSIT-FIELD LISP::SET-EXCLUSIVE-OR LISP::DIRECTORY
           LISP::VECTOR-PUSH-EXTEND LISP::FILE-POSITION LISP::CHAR-INT
           CONDITIONS::PACKAGE-ERROR-PACKAGE LISP::MACRO-FUNCTION
           LISP::SHORT-SITE-NAME LISP::NSTRING-UPCASE LISP::READ
           LISP::&ENVIRONMENT LISP::BLOCK LISP::CALL-ARGUMENTS-LIMIT
           LISP::THROW LISP::PHASE LISP::PROBE-FILE LISP::CHAR<
           LISP::STRING-RIGHT-TRIM LISP::RATIONALP LISP::STREAM-ERROR
           LISP::*DEBUG-IO* LISP::DOUBLE-FLOAT-EPSILON
           LISP::DOUBLE-FLOAT-NEGATIVE-EPSILON LISP::GENERIC-FUNCTION
           LISP::SET-DISPATCH-MACRO-CHARACTER
           LISP::GET-DISPATCH-MACRO-CHARACTER LISP::STRING-UPCASE
           LISP::STRING-DOWNCASE LISP::LOGXOR LISP::IN-PACKAGE LISP::SQRT
           LISP::SUBST-IF-NOT LISP::LOGICAL-PATHNAME-TRANSLATIONS
           LISP::COPY-READTABLE LISP::SORT LISP::ALPHA-CHAR-P
           SYSTEM::DEFINE-COMPILER-MACRO LISP::STANDARD-CLASS
           CONDITIONS::HANDLER-BIND LISP::SXHASH LISP::CADDR LISP::EXPT
           LISP::REVAPPEND DEFPACKAGE::DEFPACKAGE LISP::CATCH LISP::TRUENAME
           LISP::RANDOM-STATE-P LISP::>= LISP::DEFINE-MODIFY-MACRO
           LISP::METHOD LISP::DEFMACRO LISP::FLOATING-POINT-INVALID-OPERATION
           LISP::PROGRAM-ERROR LISP::<= LISP::STORAGE-CONDITION LISP::BIT-NOT
           LISP::CONSTANTP LISP::SIMPLE-BIT-VECTOR LISP::LOGNOR LISP::POSITION
           LISP::NUNION LISP::PPRINT-POP LISP::FFLOOR
           LISP::LOAD-LOGICAL-PATHNAME-TRANSLATIONS LISP::DO-SYMBOLS
           LISP::HASH-TABLE-COUNT LISP::DEFCONSTANT LISP::DEFTYPE
           LISP::IMAGPART LISP::VARIABLE LISP::*PRINT-MISER-WIDTH*
           LISP::SYMBOL-NAME LISP::MACROEXPAND
           CONDITIONS::ARITHMETIC-ERROR-OPERANDS LISP::NTH-VALUE
           CONDITIONS::USE-VALUE LISP::/= LISP::WARNING LISP::TRACE
           LISP::WITH-OPEN-FILE LISP::RPLACA LISP::BOOLE-IOR
           LISP::MACHINE-VERSION LISP::FLOAT-SIGN
           LISP::PACKAGE LISP::SPACE LISP::SYMBOL-FUNCTION
           LISP::*STANDARD-INPUT* CONDITIONS::STREAM-ERROR-STREAM
           PCL::SLOT-MISSING PCL::REMOVE-METHOD LISP::SHADOW LISP::LET*
           LISP::EXP LISP::COMPILE-FILE-PATHNAME LISP::DELETE
           LISP::BOOLE-ANDC1 LISP::*READ-SUPPRESS* PCL::STANDARD LISP::NTHCDR
           LISP::SAFETY LISP::LAMBDA-LIST-KEYWORDS LISP::// LISP::ELT
           LISP::PPRINT-LOGICAL-BLOCK LISP::PARSE-ERROR LISP::1-
           CONDITIONS::*DEBUGGER-HOOK* LISP::DECODE-UNIVERSAL-TIME
           LISP::GENSYM LISP::1+ LISP::SIN LISP::REMOVE-IF-NOT LISP::CDDDAR
           LISP::EQUAL LISP::DEFSETF LISP::NTH LISP::CADDAR LISP::PPRINT
           LISP::LOGEQV LISP::FIND-IF LISP::PACKAGE-ERROR LISP::STREAM
           LISP::BIT-ANDC2 LISP::BOOLE-AND LISP::OPEN LISP::&OPTIONAL
           LISP::SHORT-FLOAT LISP::MIN LISP::++ LISP::ISQRT LISP::CODE-CHAR
           LISP::LENGTH LISP::LOGNAND LISP::WHEN LISP::DELETE-IF-NOT LISP::TAN
           LISP::ROUND LISP::PROGN LISP::MEMBER-IF-NOT LISP::RASSOC
           LISP::BOOLE-NAND LISP::INTEGERP CONDITIONS::IGNORE-ERRORS
           LISP::SEVENTH LISP::MOST-NEGATIVE-FIXNUM LISP::CHAR-UPCASE
           LISP::ZEROP LISP::ASSOC-IF-NOT LISP::STRING-EQUAL LISP::READ-CHAR
           LISP::PEEK-CHAR LISP::CAR LISP::EQUALP LISP::EXPORT LISP::NRECONC
           LISP::ATAN LISP::NSUBST CONDITIONS::ARITHMETIC-ERROR-OPERATION
           PCL::MAKE-LOAD-FORM-SAVING-SLOTS SYSTEM::COPY-STRUCTURE
           LISP::BASE-CHAR LISP::NAME-CHAR LISP::GET-UNIVERSAL-TIME
           LISP::BIT-NOR LISP::COMPLEXP LISP::LIST-LENGTH LISP::SIMPLE-VECTOR
           LISP::MAKE-SYMBOL LISP::SUBSTITUTE-IF-NOT LISP::SIGNED-BYTE
           LISP::*READTABLE* LISP::STRING<= LISP::STRING>= LISP::STRING/=
           LISP::DEFPARAMETER LISP::PATHNAME-DIRECTORY LISP::REMOVE-DUPLICATES
           LISP::LOGCOUNT LISP::COND LISP::COMPILE LISP::PRINT LISP::&WHOLE
           LISP::AND LISP::IGNORE LISP::UNLESS LISP::CDAAR LISP::MAPLIST
           LISP::*READ-EVAL* LISP::THIRD COMPILER::*COMPILE-PRINT* LISP::CAAR
           LISP::TWO-WAY-STREAM-INPUT-STREAM
           LISP::TWO-WAY-STREAM-OUTPUT-STREAM LISP::MOST-NEGATIVE-SHORT-FLOAT
           LISP::MOST-NEGATIVE-SINGLE-FLOAT LISP::MOST-NEGATIVE-DOUBLE-FLOAT
           LISP::MOST-NEGATIVE-LONG-FLOAT LISP::GETHASH LISP::PSETQ
           LISP::SIMPLE-WARNING LISP::LISP-IMPLEMENTATION-TYPE LISP::FIND
           LISP::STANDARD-CHAR LISP::UNREAD-CHAR LISP::DELETE-DUPLICATES
           LISP::SIMPLE-CONDITION LISP::FILE-LENGTH LISP::ARRAY-TOTAL-SIZE
           CONDITIONS::*BREAK-ON-SIGNALS* CONDITIONS::INVOKE-RESTART
           LISP::AREF PCL::FIND-CLASS LISP::WITH-COMPILATION-UNIT
           CONDITIONS::ABORT LISP::LOAD-TIME-VALUE LISP::LDB-TEST LISP::LABELS
           LISP::CONS LISP::PACKAGE-NICKNAMES LISP::EVERY LISP::SHIFTF
           LISP::IDENTITY LISP::DIGIT-CHAR-P LISP::ROOM LISP::COMPILE-FILE
           LISP::STRING-STREAM LISP::OPEN-STREAM-P
           LISP::STREAM-EXTERNAL-FORMAT LISP::TAGBODY
           LISP::SIMPLE-BIT-VECTOR-P LISP::TERPRI LISP::METHOD-COMBINATION
           LISP::BIT-XOR LISP::PSETF LISP::YES-OR-NO-P LISP::NUMERATOR
           LISP::*PRINT-LENGTH* LISP::NSTRING-CAPITALIZE LISP::TREE-EQUAL
           LISP::*PRINT-LINES* LISP::*READ-BASE* LISP::WRITE-STRING
           LISP::HASH-TABLE-REHASH-THRESHOLD LISP::ARRAY-IN-BOUNDS-P
           LISP::SUBST-IF LISP::DECF LISP::FINISH-OUTPUT LISP::PAIRLIS
           LISP::DEFVAR PCL::ENSURE-GENERIC-FUNCTION LISP::RETURN
           LISP::READ-PRESERVING-WHITESPACE LISP::CDADAR LISP::CHAR-EQUAL
           COMPILER::*COMPILE-FILE-TRUENAME* COMPILER::*COMPILE-FILE-PATHNAME*
           LISP::COPY-SYMBOL LISP::NSET-EXCLUSIVE-OR LISP::CAADAR
           LISP::KEYWORD LISP::DECLARATION LISP::COPY-SEQ LISP::NSUBST-IF-NOT
           LISP::WITH-PACKAGE-ITERATOR PCL::MAKE-INSTANCE LISP::NSUBST-IF
           LISP::FIND-PACKAGE LISP::SOFTWARE-VERSION LISP::LOGBITP
           LISP::LEAST-NEGATIVE-SHORT-FLOAT LISP::LEAST-NEGATIVE-SINGLE-FLOAT
           LISP::LEAST-NEGATIVE-DOUBLE-FLOAT LISP::LEAST-NEGATIVE-LONG-FLOAT
           LISP::LEAST-NEGATIVE-NORMALIZED-SHORT-FLOAT
           LISP::LEAST-NEGATIVE-NORMALIZED-SINGLE-FLOAT
           LISP::LEAST-NEGATIVE-NORMALIZED-DOUBLE-FLOAT
           LISP::LEAST-NEGATIVE-NORMALIZED-LONG-FLOAT LISP::MERGE
           LISP::*PRINT-PRETTY* LISP::DIRECTORY-NAMESTRING PCL::CALL-METHOD
           LISP::FTYPE LISP::COMPILED-FUNCTION LISP::&KEY
           LISP::STRING-NOT-EQUAL LISP::FIRST LISP::ALPHANUMERICP
           LISP::READ-SEQUENCE LISP::NINTH LISP::TENTH PCL::FUNCTION-KEYWORDS
           LISP::CTYPECASE LISP::ETYPECASE LISP::STRING LISP::GET-DECODED-TIME
           LISP::NAMESTRING LISP::NREVERSE LISP::PUSHNEW
           COMMON-LISP-USER::MAKE-METHOD LISP::SUBST LISP::DO* LISP::FIXNUM
           LISP::STANDARD-OBJECT LISP::DO-ALL-SYMBOLS LISP::DOUBLE-FLOAT
           LISP::FILE-STREAM LISP::CAADR LISP::COPY-ALIST LISP::NSUBSTITUTE
           LISP::FBOUNDP LISP::PACKAGEP PCL::DESCRIBE-OBJECT LISP::LIST
           LISP::DEFINE-SYMBOL-MACRO LISP::REST LISP::SHORT-FLOAT-EPSILON
           LISP::SHORT-FLOAT-NEGATIVE-EPSILON LISP::STREAM-ELEMENT-TYPE
           LISP::CONSTANTLY LISP::VECTORP LISP::*PRINT-PPRINT-DISPATCH*
           LISP::WRITE-LINE LISP::FDEFINITION LISP::ARRAYP LISP::FIND-IF-NOT
           LISP::STREAMP PCL::INVALID-METHOD-ERROR LISP::CASE LISP::INLINE
           LISP::READ-FROM-STRING LISP::ASSERT LISP::HASH-TABLE-REHASH-SIZE
           LISP::FOURTH CONDITIONS::FILE-ERROR-PATHNAME LISP::ACONS
           LISP::SYMBOL-PACKAGE LISP::SUBSTITUTE CONDITIONS::STORE-VALUE
           LISP::LAST PCL::DEFINE-METHOD-COMBINATION LISP::STRING-TRIM
           CONDITIONS::RESTART-CASE LISP::DEBUG
           CONDITIONS::SIMPLE-CONDITION-FORMAT-ARGUMENTS LISP::NOTINLINE
           LISP::TYPE-ERROR LISP::FLOAT-DIGITS LISP::FIFTH CONDITIONS::SIGNAL
           LISP::GET-PROPERTIES LISP::LIST* CONDITIONS::RESTART
           LISP::SHADOWING-IMPORT LISP::NSTRING-DOWNCASE
           LISP::WITH-INPUT-FROM-STRING LISP::SIMPLE-VECTOR-P LISP::CDDADR
           LISP::DECLARE LISP::BIT-VECTOR-P LISP::STRING-GREATERP
           LISP::INTEGER-LENGTH LISP::CADADR LISP::*PRINT-RIGHT-MARGIN*
           PCL::WITH-SLOTS LISP::SET-PPRINT-DISPATCH LISP::SBIT
           PCL::DEFGENERIC LISP::WITH-HASH-TABLE-ITERATOR
           LISP::NSET-DIFFERENCE LISP::COS LISP::RASSOC-IF-NOT
           LISP::FILE-ERROR LISP::SIMPLE-ARRAY LISP::TAILP LISP::CHAR>=
           LISP::*QUERY-IO* LISP::&AUX LISP::*PRINT-LEVEL* LISP::DIGIT-CHAR
           LISP::SOFTWARE-TYPE LISP::FLET LISP::COPY-PPRINT-DISPATCH
           LISP::FORMATTER LISP::MOST-POSITIVE-FIXNUM LISP::FUNCTION
           LISP::CELL-ERROR LISP::ATANH LISP::SCHAR
           LISP::FUNCTION-LAMBDA-EXPRESSION LISP::RPLACD LISP::CHAR-NOT-LESSP
           LISP::SIMPLE-TYPE-ERROR LISP::FTRUNCATE LISP::MULTIPLE-VALUES-LIMIT
           LISP::CIS LISP::ARRAY-DIMENSIONS LISP::UNUSE-PACKAGE
           LISP::ARRAY-RANK-LIMIT LISP::RASSOC-IF LISP::UNTRACE
           LISP::STYLE-WARNING LISP::SINGLE-FLOAT-EPSILON
           LISP::SINGLE-FLOAT-NEGATIVE-EPSILON LISP::DRIBBLE LISP::LOGORC2
           LISP::ADJUSTABLE-ARRAY-P LISP::CLEAR-INPUT LISP::PROGV
           LISP::*FEATURES* LISP::WRITE-SEQUENCE LISP::*PACKAGE* LISP::SETF
           PCL::CHANGE-CLASS LISP::BUTLAST LISP::CHECK-TYPE LISP::REALP
           LISP::ARRAY-HAS-FILL-POINTER-P LISP::DO-EXTERNAL-SYMBOLS
           LISP::LONG-FLOAT-EPSILON LISP::LONG-FLOAT-NEGATIVE-EPSILON
           LISP::LOG LISP::PARSE-INTEGER LISP::NOTEVERY LISP::APROPOS-LIST
           LISP::POSITION-IF-NOT LISP::*PRINT-ARRAY* LISP::FLOAT
           LISP::RATIONALIZE LISP::BIT-VECTOR LISP::LOGANDC2
           LISP::MOST-POSITIVE-SHORT-FLOAT LISP::MOST-POSITIVE-SINGLE-FLOAT
           LISP::MOST-POSITIVE-DOUBLE-FLOAT LISP::MOST-POSITIVE-LONG-FLOAT
           LISP::INTEGER PCL::WITH-ACCESSORS LISP::THE LISP::COUNT-IF-NOT
           PCL::NO-APPLICABLE-METHOD LISP::EVAL LISP::READTABLE-CASE
           LISP::GETF LISP::MAPCON LISP::*TERMINAL-IO* LISP::CDDR
           LISP::END-OF-FILE LISP::STABLE-SORT LISP::VALUES
           LISP::*PRINT-RADIX* LISP::UNDEFINED-FUNCTION LISP::CADAR
           LISP::BOOLE-EQV LISP::PRINT-NOT-READABLE LISP::PARSE-NAMESTRING
           LISP::SEQUENCE LISP::WILD-PATHNAME-P LISP::READTABLE
           LISP::READTABLEP LISP::IGNORABLE LISP::VALUES-LIST LISP::TYPE-OF
           LISP::DIVISION-BY-ZERO LISP::OR LISP::HASH-TABLE-SIZE LISP::INSPECT
           LISP::NSUBSTITUTE-IF LISP::LOGORC1 LISP::CHARACTER LISP::CHARACTERP
           LISP::FILE-WRITE-DATE LISP::VECTOR-PUSH
           LISP::ECHO-STREAM-INPUT-STREAM LISP::ECHO-STREAM-OUTPUT-STREAM
           LISP::CLOSE LISP::FILE-AUTHOR LISP::SCALE-FLOAT
           CONDITIONS::MUFFLE-WARNING LISP::LISP-IMPLEMENTATION-VERSION
           LISP::MEMBER-IF LISP::MAP-INTO LISP::STANDARD-GENERIC-FUNCTION
           LISP::PATHNAME-NAME LISP::CEILING CONDITIONS::DEFINE-CONDITION
           LISP::PPRINT-TAB LISP::STRING-NOT-GREATERP CONDITIONS::FIND-RESTART
           LISP::TRANSLATE-LOGICAL-PATHNAME LISP::ERROR
           LISP::ARRAY-ROW-MAJOR-INDEX LISP::MAPCAR LISP::STRINGP
           LISP::ARRAY-DIMENSION-LIMIT LISP::DESTRUCTURING-BIND LISP::CERROR
           LISP::MACROEXPAND-1 LISP::BOOLEAN LISP::CHAR-GREATERP
           PCL::REINITIALIZE-INSTANCE LISP::CDAADR LISP::TYPE LISP::SUBSEQ
           LISP::SPECIAL-OPERATOR-P PCL::SLOT-BOUNDP LISP::PRIN1 LISP::CAAADR
           LISP::PACKAGE-NAME LISP::HOST-NAMESTRING LISP::UNBOUND-SLOT
           CONDITIONS::MAKE-CONDITION LISP::PRINT-UNREADABLE-OBJECT
           LISP::DEFSTRUCT LISP::SUBLIS LISP::TYPECASE LISP::ACOS
           LISP::ARRAY-DISPLACEMENT LISP::IF LISP::GET-INTERNAL-RUN-TIME
           LISP::GET-INTERNAL-REAL-TIME LISP::BYTE LISP::BUILT-IN-CLASS
           LISP::PROG LISP::CONCATENATED-STREAM-STREAMS LISP::BOOLE-C1
           LISP::HASH-TABLE-P LISP::EXTENDED-CHAR PCL::SLOT-MAKUNBOUND
           LISP::*GENSYM-COUNTER* LISP::MAKE-RANDOM-STATE PCL::MAKE-LOAD-FORM
           LISP::NUMBERP LISP::LAMBDA LISP::STRUCTURE-CLASS
           LISP::MAKE-PATHNAME LISP::ED LISP::MULTIPLE-VALUE-CALL
           LISP::OUTPUT-STREAM-P LISP::CHAR-LESSP LISP::RANDOM-STATE
           PCL::NEXT-METHOD-P LISP::MAKE-ECHO-STREAM LISP::STRING-CAPITALIZE
           LISP::SPECIAL LISP::PPRINT-INDENT LISP::ARRAY-DIMENSION LISP::CDDDR
           LISP::BIT-ORC1 LISP::MAKE-SEQUENCE LISP::REVERSE
           LISP::ENSURE-DIRECTORIES-EXIST
           CONDITIONS::PRINT-NOT-READABLE-OBJECT LISP::DEFINE-SETF-EXPANDER
           LISP::PACKAGE-USE-LIST LISP::PACKAGE-USED-BY-LIST
           LISP::MERGE-PATHNAMES LISP::PROG* LISP::CONCATENATED-STREAM
           LISP::STANDARD-METHOD LISP::ECASE CONDITIONS::INVOKE-DEBUGGER
           LISP::CCASE LISP::UNINTERN LISP::CHAR-CODE-LIMIT
           LISP::ENCODE-UNIVERSAL-TIME PCL::COMPUTE-APPLICABLE-METHODS
           LISP::BOOLE-2 LISP::MAKE-ARRAY LISP::CHAR<= LISP::COPY-LIST
           LISP::KEYWORDP LISP::COMPILED-FUNCTION-P LISP::RATIO LISP::APROPOS
           LISP::REALPART LISP::RATIONAL LISP::*LOAD-TRUENAME* LISP::LOGIOR
           LISP::BOUNDP LISP::MAKE-BROADCAST-STREAM
           LISP::FLOATING-POINT-OVERFLOW LISP::FLOATING-POINT-UNDERFLOW
           LISP::LAMBDA-PARAMETERS-LIMIT LISP::LOGICAL-PATHNAME
           LISP::*LOAD-PATHNAME* LISP::MISMATCH LISP::COUNT-IF
           LISP::POSITION-IF LISP::DELETE-PACKAGE
           CONDITIONS::WITH-SIMPLE-RESTART LISP::MAKE-LIST LISP::*MODULES*
           LISP::NOT LISP::RENAME-PACKAGE LISP::EVENP LISP::MINUSP
           PCL::SYMBOL-MACROLET LISP::PPRINT-FILL LISP::UPPER-CASE-P
           LISP::*MACROEXPAND-HOOK* LISP::INTERACTIVE-STREAM-P LISP::POP
           LISP::LONG-SITE-NAME LISP::NULL CONDITIONS::CONTINUE
           LISP::BOOLE-NOR LISP::RETURN-FROM LISP::STRING> LISP::ASSOC-IF
           LISP::LOGAND LISP::SET LISP::LDIFF LISP::MAX LISP::FLOATP
           LISP::BOOLE-1 CONDITIONS::HANDLER-CASE LISP::CONJUGATE LISP::UNION
           LISP::LET LISP::EVAL-WHEN LISP::REMOVE PCL::METHOD-QUALIFIERS
           LISP::&REST LISP::BIT LISP::*READ-DEFAULT-FLOAT-FORMAT*
           LISP::CDDAAR LISP::NUMBER LISP::PATHNAME LISP::GET
           LISP::GET-OUTPUT-STREAM-STRING LISP::UNWIND-PROTECT LISP::ASIN
           LISP::&BODY LISP::*LOAD-PRINT* LISP::EQL LISP::CADAAR
           LISP::GRAPHIC-CHAR-P LISP::*LOAD-VERBOSE*
           LISP::LEAST-POSITIVE-SHORT-FLOAT LISP::LEAST-POSITIVE-SINGLE-FLOAT
           LISP::LEAST-POSITIVE-DOUBLE-FLOAT LISP::LEAST-POSITIVE-LONG-FLOAT
           LISP::LEAST-POSITIVE-NORMALIZED-SHORT-FLOAT
           LISP::LEAST-POSITIVE-NORMALIZED-SINGLE-FLOAT
           LISP::LEAST-POSITIVE-NORMALIZED-DOUBLE-FLOAT
           LISP::LEAST-POSITIVE-NORMALIZED-LONG-FLOAT LISP::PATHNAME-HOST
           LISP::ASSOC LISP::BIT-EQV LISP::** LISP::NIL
           CONDITIONS::TYPE-ERROR-EXPECTED-TYPE
           PCL::UPDATE-INSTANCE-FOR-DIFFERENT-CLASS
           PCL::UPDATE-INSTANCE-FOR-REDEFINED-CLASS LISP::BIT-IOR LISP::SINH
           LISP::MAPL LISP::INTEGER-DECODE-FLOAT
           LISP::UPGRADED-ARRAY-ELEMENT-TYPE LISP::MAP LISP::FUNCALL
           LISP::ENDP LISP::CDR LISP::FLOATING-POINT-INEXACT LISP::FILL
           LISP::MACHINE-INSTANCE LISP::PROCLAIM LISP::ASH
           LISP::PPRINT-NEWLINE LISP::SECOND LISP::*PRINT-READABLY*
           LISP::DEFUN LISP::/// LISP::MAKE-DISPATCH-MACRO-CHARACTER
           LISP::ODDP LISP::ECHO-STREAM LISP::CHAR-DOWNCASE PCL::DEFMETHOD
           LISP::WITH-OPEN-STREAM LISP::MOD LISP::BOOLE-XOR LISP::DISASSEMBLE
           LISP::LOWER-CASE-P LISP::BOTH-CASE-P LISP::ARRAY LISP::SYMBOL-VALUE
           LISP::TRUNCATE LISP::SINGLE-FLOAT LISP::COUNT LISP::TANH
           LISP::CONSP LISP::COMPLEX LISP::STRING= LISP::CHAR
           CONDITIONS::RESTART-NAME LISP::ADJUST-ARRAY LISP::SEARCH
           LISP::FIND-SYMBOL LISP::REMF LISP::DOLIST LISP::ENOUGH-NAMESTRING
           LISP::T LISP::MULTIPLE-VALUE-PROG1 PCL::CLASS-NAME LISP::CDAR
           LISP::USE-PACKAGE LISP::*RANDOM-STATE* LISP::DPB
           LISP::*ERROR-OUTPUT* LISP::SIMPLE-ERROR LISP::PATHNAME-VERSION
           LISP::MAKUNBOUND CONDITIONS::CELL-ERROR-NAME PCL::SLOT-EXISTS-P
           LISP::+++ LISP::NOTANY LISP::CAAAR LISP::BIT-ANDC1 LISP::SATISFIES
           LISP::CLASS PCL::CALL-NEXT-METHOD LISP::VECTOR-POP
           LISP::INTERSECTION LISP::FUNCTIONP LISP::LDB LISP::PATHNAME-MATCH-P
           LISP::COMPLEMENT LISP::ACOSH PCL::CLASS-OF LISP::COMPILER-MACRO
           LISP::GCD LISP::ARRAY-RANK LISP::MAPHASH LISP::EIGHTH LISP::INCF
           LISP::CONTROL-ERROR LISP::STRUCTURE LISP::CHAR-CODE LISP::OPTIMIZE
           LISP::FILE-STRING-LENGTH LISP::> LISP::= LISP::MEMBER
           LISP::BOOLE-ANDC2 LISP::< LISP::LISTEN
           LISP::MAKE-CONCATENATED-STREAM LISP::FIND-ALL-SYMBOLS LISP::SIXTH
           LISP::APPLY LISP::REMOVE-IF PCL::SHARED-INITIALIZE LISP::STRING<
           LISP::BROADCAST-STREAM-STREAMS LISP::NSUBLIS LISP::ATOM
           LISP::OTHERWISE LISP::*DEFAULT-PATHNAME-DEFAULTS* LISP::DELETE-IF
           LISP::MAPCAN LISP::GET-SETF-EXPANSION LISP::MULTIPLE-VALUE-LIST
           LISP::PACKAGE-SHADOWING-SYMBOLS LISP::STRING-LESSP
           LISP::WRITE-TO-STRING CONDITIONS::RESTART-BIND LISP::/ LISP::FLOOR
           LISP::SIMPLE-BASE-STRING LISP::PRIN1-TO-STRING
           LISP::PRINC-TO-STRING LISP::- LISP::BIT-NAND LISP::SYMBOL
           LISP::SUBSTITUTE-IF LISP::+ LISP::LISTP LISP::CDAAAR LISP::*
           PCL::SLOT-VALUE LISP::MACROLET LISP::DOTIMES LISP::CAAAAR
           LISP::MASK-FIELD LISP::QUOTE LISP::BROADCAST-STREAM
           LISP::MAKE-PACKAGE LISP::BOOLE-CLR LISP::*TRACE-OUTPUT*
           LISP::CHAR-NOT-GREATERP LISP::BOOLE-SET LISP::READ-CHAR-NO-HANG
           LISP::HASH-TABLE LISP::UPGRADED-COMPLEX-PART-TYPE LISP::SOME
           LISP::SLEEP LISP::*PRINT-CIRCLE* PCL::ALLOCATE-INSTANCE
           CONDITIONS::WITH-CONDITION-RESTARTS LISP::PPRINT-DISPATCH
           LISP::CHAR/= LISP::FORCE-OUTPUT LISP::REQUIRE LISP::PROG2
           LISP::ARITHMETIC-ERROR LISP::PRINC LISP::PATHNAME-TYPE
           PCL::FIND-METHOD LISP::BREAK LISP::CDADR LISP::TIME LISP::REDUCE
           LISP::SYNONYM-STREAM LISP::WRITE LISP::CHAR-NOT-EQUAL
           LISP::NBUTLAST LISP::UNSIGNED-BYTE LISP::FILL-POINTER
           PCL::MAKE-INSTANCES-OBSOLETE LISP::WITH-STANDARD-IO-SYNTAX
           LISP::ARRAY-TOTAL-SIZE-LIMIT LISP::FRESH-LINE LISP::READ-BYTE
           LISP::NCONC LISP::MAKE-TWO-WAY-STREAM LISP::MACHINE-TYPE
           LISP::MAKE-SYNONYM-STREAM LISP::MULTIPLE-VALUE-SETQ
           LISP::STRUCTURE-OBJECT LISP::CHAR> LISP::*STANDARD-OUTPUT*
           LISP::SET-DIFFERENCE LISP::WRITE-BYTE LISP::MAPC
           LISP::INPUT-STREAM-P CONDITIONS::UNBOUND-SLOT-INSTANCE
           LISP::REMHASH LISP::LOOP LISP::CDDDDR LISP::READ-DELIMITED-LIST
           LISP::FLOAT-RADIX LISP::BASE-STRING LISP::MAKE-STRING LISP::ASINH
           LISP::PUSH SYSTEM::*COMPILE-VERBOSE* LISP::BIT-AND LISP::CADDDR
           LISP::PPRINT-LINEAR LISP::&ALLOW-OTHER-KEYS)))
  (import s "COMMON-LISP")
  (import s "CL-USER"))

(shadowing-import (find-symbol "DOCUMENTATION" 'pcl) 'common-lisp)
(shadowing-import (find-symbol "DOCUMENTATION" 'pcl) 'user)
 
 t)

(progn

  (dolist (s '(*load-pathname* *load-print*
			       *load-truename* *print-lines* *print-miser-width*
			       *print-pprint-dispatch* *print-right-margin* *read-eval*
			       lisp::arithmetic-error broadcast-stream-streams cell-error
			       cell-error-name compile compile-file compiler-macro
			       compiler-macro-function complement concatenated-stream-streams
			       condition control-error copy-pprint-dispatch copy-structure count
			       debug define-compiler-macro define-setf-expander define-symbol-macro
			       defpackage describe describe-object division-by-zero dynamic-extent
			       ensure-directories-exist fdefinition file-string-length formatter
			       get-setf-expansion hash-table-rehash-size
			       hash-table-rehash-threshold interactive-stream-p
			       make-load-form
			       make-method pathname-match-p
			       pprint-dispatch  print-not-readable-object
			       print-unreadable-object 
			       set-pprint-dispatch simple-condition-format-control
			       stream-external-format synonym-stream-symbol
			       translate-logical-pathname translate-pathname
			       unbound-slot-instance 
			       upgraded-complex-part-type wild-pathname-p with-compilation-unit
			       with-condition-restarts 
			       ))
    (shadowing-import (list s) "COMMON-LISP"))
  
  (use-package "ANSI-LOOP" "COMMON-LISP")
  (use-package "ANSI-LOOP" "CL-USER")
  
  (do-symbols (s "COMMON-LISP")
	      (export (list s) "COMMON-LISP"))
  
  (rename-package 'common-lisp 'common-lisp '(cl))
  
  (unintern 'system)
  (unintern 'lisp)
  (unintern 'compiler)
  (unintern 'user)
  (unintern 'int)
  (when (fboundp 'si::init-cmp-anon) (fmakunbound 'si::init-cmp-anon))

  (eval-when (load)
	     (if (fboundp 'get-system-time-zone)
		 (setf system:*default-time-zone* (get-system-time-zone))
	       (setf system:*default-time-zone* 6)))
  
  (si::set-up-top-level)
  (if (fboundp 'si::user-init) (si::user-init))
  
  (setq si::*gcl-extra-version* @LI-EXTVERS@
	si::*gcl-minor-version* @LI-MINVERS@ 
	si::*gcl-major-version* @LI-MAJVERS@)
  (setq compiler::*cc* @LI-CC@)
  (setq compiler::*ld* @LI-LD@)
  (setq compiler::*ld-libs* @LI-LD-LIBS@)
  (setq compiler::*opt-three* @LI-OPT-THREE@)
  (setq compiler::*opt-two* @LI-OPT-TWO@)
  (setq compiler::*init-lsp* @LI-INIT-LSP@)

  (defvar si::*system-banner* (si::default-system-banner))

  (in-package 'cl-user)
  (import 'si::info)
  (rename-package 'common-lisp-user 'common-lisp-user '(cl-user))

  t)
